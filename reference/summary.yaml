openapi: 3.0.0
info:
  title: summary
  version: '1.0'
servers:
  - url: 'http://localhost:3000'
paths:
  /api/summary/short-statistics:
    post:
      summary: ''
      operationId: post-api-summary-short-statistics
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  oFte:
                    $ref: '#/components/schemas/short-statistic'
                  oVacancies:
                    $ref: '#/components/schemas/short-statistic'
                  oCost:
                    $ref: '#/components/schemas/short-statistic'
                required:
                  - oFte
                  - oVacancies
                  - oCost
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/short-statistic-filter'
  /api/summary/headcount:
    post:
      summary: ''
      operationId: post-api-summary-headcount
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Headcount'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/summary-filter'
  /api/summary/headcount-dynamic:
    post:
      summary: ''
      operationId: post-api-summary-headcount-dynamic
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HeadcountDynamic'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/summary-filter'
  /api/summary/payroll:
    post:
      summary: ''
      operationId: post-api-summary-payroll
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  aChartData:
                    type: array
                    items:
                      $ref: '#/components/schemas/monthly-overview'
                  aPeriods:
                    type: array
                    items:
                      $ref: '#/components/schemas/period'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/payroll-filter'
  /api/summary/payroll-dynamic:
    post:
      summary: ''
      operationId: post-api-summary-payroll-dynamic
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  aChartData:
                    type: array
                    items:
                      $ref: '#/components/schemas/monthly-change-dynamic'
                  aPeriods:
                    type: array
                    items:
                      $ref: '#/components/schemas/period'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/payroll-filter'
        description: ''
  /api/summary/vacancies-analysis:
    post:
      summary: ''
      operationId: post-api-summary-vacancies-analysis
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VacanciesAnalysis'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/summary-filter'
  /api/summary/vacancies-total:
    parameters: []
    post:
      summary: ''
      operationId: post-api-summary-vacancies-total
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  aChartData:
                    type: array
                    items:
                      $ref: '#/components/schemas/section'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                aPositionIds:
                  type: array
                  items:
                    type: number
  /api/summary/headcount-by-location:
    post:
      summary: ''
      operationId: post-headcount-by-location
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  aOffices:
                    type: array
                    items:
                      $ref: '#/components/schemas/office-coordinates'
                required:
                  - aOffices
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                aPositionIds:
                  type: array
                  items:
                    type: number
    parameters: []
  /api/summary/payroll-by-location:
    post:
      summary: ''
      operationId: post-payroll-by-location
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  aOffices:
                    type: array
                    items:
                      $ref: '#/components/schemas/office-coordinates'
                required:
                  - aOffices
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                iCurrencyId:
                  type: number
                aPositionIds:
                  type: array
                  items:
                    type: number
        description: ''
    parameters: []
  /api/summary/vacancies-overview:
    post:
      summary: ''
      operationId: post-api-summary-vacancies-overview
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VacanciesOverview'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/summary-filter'
  /api/summary/all:
    post:
      summary: ''
      operationId: post-api-summary-all
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  sTitle:
                    type: string
                  sLevel2Name:
                    type: string
                  sLevel3Name:
                    type: string
                  oShortStatistic:
                    type: object
                    required:
                      - oTotalHeadcount
                      - oActiveHeadcount
                      - oVacancies
                      - oFutureReplacements
                      - oLongLeave
                      - oSalary
                    properties:
                      oTotalHeadcount:
                        $ref: '#/components/schemas/short-statistic'
                      oActiveHeadcount:
                        $ref: '#/components/schemas/short-statistic'
                      oVacancies:
                        $ref: '#/components/schemas/short-statistic'
                      oFutureReplacements:
                        $ref: '#/components/schemas/short-statistic'
                      oLongLeave:
                        $ref: '#/components/schemas/short-statistic'
                      oSalary:
                        $ref: '#/components/schemas/short-statistic'
                  oHeadcount:
                    $ref: '#/components/schemas/Headcount'
                  oHeadcountDynamic:
                    $ref: '#/components/schemas/HeadcountDynamic'
                  oHeadcountDescription:
                    $ref: '#/components/schemas/HeadcountDescription'
                  oHeadcountTable:
                    $ref: ./master-data.yaml#/components/schemas/DataGridDto
                  oProjectedHeadcountAnalysis:
                    $ref: '#/components/schemas/ProjectedHeadcountAnalysis'
                  oProjectedHeadcountDescription:
                    $ref: '#/components/schemas/ProjectedHeadcountDescription'
                  oPayroll:
                    type: object
                    properties:
                      aChartData:
                        type: array
                        items:
                          $ref: '#/components/schemas/monthly-overview'
                      aPeriods:
                        type: array
                        items:
                          $ref: '#/components/schemas/period'
                  oPayrollDynamic:
                    type: object
                    properties:
                      aChartData:
                        type: array
                        items:
                          $ref: '#/components/schemas/monthly-change-dynamic'
                      aPeriods:
                        type: array
                        items:
                          $ref: '#/components/schemas/period'
                  oVacanciesOverview:
                    $ref: '#/components/schemas/VacanciesOverview'
                  oVacanciesDynamic:
                    $ref: '#/components/schemas/VacanciesDynamic'
                  oVacanciesOverviewDescription:
                    $ref: '#/components/schemas/VacanciesOverviewDescription'
                  oVacanciesDetails:
                    $ref: '#/components/schemas/VacanciesDetails'
                  oVacanciesDetailsDescription:
                    $ref: '#/components/schemas/VacanciesDetailsDescription'
                  oVacanciesAnalysis:
                    $ref: '#/components/schemas/VacanciesAnalysis'
                  oVacanciesAnalysisDescription:
                    $ref: '#/components/schemas/VacanciesAnalysisDescription'
                  oVacanciesTotal:
                    type: object
                    properties:
                      aChartData:
                        type: array
                        items:
                          $ref: '#/components/schemas/section'
                      aPeriods:
                        type: array
                        items:
                          $ref: '#/components/schemas/period'
                  oCareerLevels:
                    type: object
                    required:
                      - aChartData
                    properties:
                      aChartData:
                        type: array
                        items:
                          $ref: '#/components/schemas/section'
                  oHeadcountByLocation:
                    type: object
                    properties:
                      aOffices:
                        type: array
                        items:
                          $ref: '#/components/schemas/office-coordinates'
                  oPayrollByLocation:
                    type: object
                    properties:
                      aOffices:
                        type: array
                        items:
                          $ref: '#/components/schemas/office-coordinates'
                required:
                  - sTitle
                  - oShortStatistic
                  - oHeadcount
                  - oHeadcountDynamic
                  - oHeadcountDescription
                  - oHeadcountTable
                  - oProjectedHeadcountAnalysis
                  - oProjectedHeadcountDescription
                  - oVacanciesOverview
                  - oVacanciesDynamic
                  - oVacanciesOverviewDescription
                  - oVacanciesDetails
                  - oVacanciesDetailsDescription
                  - oVacanciesAnalysis
                  - oVacanciesAnalysisDescription
                  - oCareerLevels
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/short-statistic-filter'
        description: ''
  /api/summary/projected-headcount-analysis:
    post:
      summary: ''
      operationId: post-api-summary-projected-headcount-analysis
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectedHeadcountAnalysis'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/summary-filter'
  /api/summary/vacancies-dynamic:
    post:
      summary: ''
      operationId: post-api-summary-vacancies-dynamic
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VacanciesDynamic'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/summary-filter'
  /api/summary/vacancies-details:
    post:
      summary: ''
      operationId: post-api-summary-vacancies-details
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VacanciesDetails'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/summary-filter'
components:
  schemas:
    summary-filter:
      title: Summary-filter
      type: object
      properties:
        aPositionIds:
          type: array
          items:
            type: number
        sPeriod:
          type: string
      required:
        - aPositionIds
    short-statistic-filter:
      title: short-statistic-filter
      type: object
      properties:
        aPositionIds:
          type: array
          items:
            type: number
        iCurrencyId:
          type: number
      required:
        - aPositionIds
        - iCurrencyId
    short-statistic:
      title: short-statistic
      type: object
      properties:
        sName:
          type: string
        sValue:
          type: string
        sChange:
          type: string
        bNegative:
          type: boolean
          description: 'если изменения отрицательные true, нужно для определения каким цветом нужно заливать'
      required:
        - sName
        - sValue
        - sChange
        - bNegative
    monthly-overview:
      title: monthly-overview
      type: object
      description: Данные за один месяц
      properties:
        sName:
          type: string
        sDesc:
          type: string
        iInitial:
          type: number
        iRevised:
          type: number
      required:
        - sName
        - sDesc
        - iInitial
        - iRevised
    period:
      title: period
      type: object
      properties:
        sValue:
          type: string
        sText:
          type: string
        bSelected:
          type: boolean
      required:
        - sValue
        - sText
    monthly-change-dynamic:
      title: monthly-change-dynamic
      type: object
      properties:
        sName:
          type: string
        sDesc:
          type: string
        iValue:
          type: number
        iChange:
          type: number
      required:
        - sName
        - sDesc
        - iValue
        - iChange
    section:
      title: section
      type: object
      properties:
        sName:
          type: string
        iValue:
          type: number
      required:
        - sName
        - iValue
    office-coordinates:
      title: office-coordinates
      type: object
      properties:
        sOfficeName:
          type: string
        fLat:
          type: number
        fLng:
          type: number
        iValue:
          type: number
      required:
        - sOfficeName
        - fLat
        - fLng
        - iValue
    payroll-filter:
      title: payroll-filter
      type: object
      properties:
        aPositionIds:
          type: array
          items:
            type: number
        iCurrencyId:
          type: number
        sPeriod:
          type: string
      required:
        - aPositionIds
        - iCurrencyId
    HeadcountDescription:
      title: HeadcountDescription
      type: object
      properties:
        sTotalHeadcountChangeDirection:
          type: string
          enum:
            - flat
            - increased
            - decreased
        iTotalHeadcountChangeValue:
          type: number
        iTotalHeadcountChangePercentValue:
          type: number
        iTotalHeadcountEndValue:
          type: number
      required:
        - sTotalHeadcountChangeDirection
        - iTotalHeadcountEndValue
    MonthlyProjectedHeadcountAnalysis:
      title: MonthlyProjectedHeadcountAnalysis
      type: object
      properties:
        sName:
          type: string
        iInitial:
          type: number
        iRevised:
          type: number
      required:
        - sName
        - iInitial
        - iRevised
    ProjectedHeadcountAnalysis:
      title: ProjectedHeadcountAnalysis
      type: object
      properties:
        aChartData:
          type: array
          items:
            $ref: '#/components/schemas/MonthlyProjectedHeadcountAnalysis'
        aPeriods:
          type: array
          items:
            $ref: '#/components/schemas/period'
      required:
        - aChartData
        - aPeriods
    ProjectedHeadcountDescription:
      title: ProjectedHeadcountDescription
      type: object
      properties:
        sPlannedHeadcountChangeDirection:
          type: string
          enum:
            - equal
            - exceeds
            - less
        iPlannedHeadcountChangeValue:
          type: number
        iPlannedHeadcountChangePercentValue:
          type: number
      required:
        - sPlannedHeadcountChangeDirection
    VacanciesOverview:
      title: VacanciesOverview
      type: object
      properties:
        aChartData:
          type: array
          items:
            $ref: '#/components/schemas/monthly-overview'
        aPeriods:
          type: array
          items:
            $ref: '#/components/schemas/period'
      required:
        - aChartData
        - aPeriods
    VacanciesDynamic:
      title: VacanciesDynamic
      type: object
      properties:
        aChartData:
          type: array
          items:
            $ref: '#/components/schemas/monthly-change-dynamic'
        aPeriods:
          type: array
          items:
            $ref: '#/components/schemas/period'
      required:
        - aChartData
    VacanciesOverviewDescription:
      title: VacanciesOverviewDescription
      type: object
      properties:
        sPlannedVacanciesChangeDirection:
          type: string
          enum:
            - flat
            - increased
            - decreased
        iPlannedVacanciesChangeValue:
          type: number
        iPlannedVacanciesChangePercentValue:
          type: number
      required:
        - sPlannedVacanciesChangeDirection
    VacanciesDetails:
      title: VacanciesDetails
      type: object
      properties:
        aChartData:
          type: array
          items:
            $ref: '#/components/schemas/VacanciesDetailsGroup'
        aPeriods:
          type: array
          items:
            $ref: '#/components/schemas/period'
      required:
        - aChartData
        - aPeriods
    VacanciesDetailsGroupData:
      title: VacanciesDetailsGroupData
      type: object
      properties:
        iAdd:
          type: number
        iMoved:
          type: number
        iClosed:
          type: number
        iNoChange:
          type: number
      required:
        - iAdd
        - iMoved
        - iClosed
        - iNoChange
    VacanciesDetailsGroup:
      title: VacanciesDetailsGroup
      type: object
      properties:
        sName:
          type: string
        oFirst:
          $ref: '#/components/schemas/VacanciesDetailsGroupData'
        oSecond:
          $ref: '#/components/schemas/VacanciesDetailsGroupData'
      required:
        - sName
        - oFirst
        - oSecond
    VacanciesDetailsDescription:
      title: VacanciesDetailsDescription
      type: object
      properties:
        iTotal:
          type: number
        iAdded:
          type: number
        iFutureReplacements:
          type: number
        iRephased:
          type: number
        iInactivated:
          type: number
      required:
        - iTotal
        - iAdded
        - iFutureReplacements
        - iRephased
        - iInactivated
    VacanciesAnalysis:
      title: VacanciesAnalysis
      type: object
      properties:
        aChartData:
          type: array
          items:
            $ref: '#/components/schemas/VacanciesAnalysisGroup'
        aPeriods:
          type: array
          items:
            $ref: '#/components/schemas/period'
      required:
        - aChartData
        - aPeriods
    VacanciesAnalysisGroup:
      title: VacanciesAnalysisGroup
      type: object
      properties:
        sName:
          type: string
        iNew:
          type: number
        iInternalTransfer:
          type: number
        iReplacement:
          type: number
        iOverlapCover:
          type: number
        iFutureReplacement:
          type: number
        iLongLeaveCover:
          type: number
      required:
        - sName
        - iNew
        - iInternalTransfer
        - iReplacement
        - iOverlapCover
        - iFutureReplacement
        - iLongLeaveCover
    VacanciesAnalysisDescription:
      title: VacanciesAnalysisDescription
      type: object
      properties:
        iNew:
          type: number
        iReplacements:
          type: number
        iFutureReplacements:
          type: number
        iOther:
          type: number
      required:
        - iNew
        - iReplacements
        - iFutureReplacements
        - iOther
    Headcount:
      title: Headcount
      type: object
      properties:
        aChartData:
          type: array
          items:
            $ref: '#/components/schemas/monthly-overview'
        aPeriods:
          type: array
          items:
            $ref: '#/components/schemas/period'
    HeadcountDynamic:
      title: HeadcountDynamic
      type: object
      properties:
        aChartData:
          type: array
          items:
            $ref: '#/components/schemas/monthly-change-dynamic'
        aPeriods:
          type: array
          items:
            $ref: '#/components/schemas/period'
